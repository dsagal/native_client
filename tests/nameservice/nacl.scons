# -*- python -*-
# Copyright (c) 2012 The Native Client Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

Import('env')

nameservice_test_nexe = env.ComponentProgram(
                            'nameservice_test',
                            'nameservice_test.c',
                            EXTRA_LIBS=['srpc',
                                        'imc_syscalls',
                                        'platform',
                                        'gio',
                                        '${PTHREAD_LIBS}',
                                        '${NONIRT_LIBS}'])
node = env.CommandSelLdrTestNacl(
    'nameservice_test.out',
    nameservice_test_nexe,
    # Pass '-a' to enable imc_connect().
    sel_ldr_flags=['-a'])
env.AddNodeToTestSuite(node, ['small_tests'], 'run_nameservice_test')
